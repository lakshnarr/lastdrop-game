<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Last Drop â€“ Demo Mode</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="assets/css/shared.css" />
</head>
<body>
  
  <!-- Small Screen Disclaimer -->
  <div id="smallScreenDisclaimer" class="small-screen-disclaimer hidden">
    <div class="disclaimer-content">
      <div class="disclaimer-icon">ðŸ“º</div>
      <div class="disclaimer-title">Best Viewed on Large Screens</div>
      <div class="disclaimer-text">
        This live board is designed for TV and large screens for an immersive gaming experience. 
        For the best experience, please use a larger display (tablet, laptop, or TV).
      </div>
      <button id="dismissDisclaimer" class="btn-small">Continue Anyway</button>
    </div>
  </div>
  
  <div id="tutorialOverlay" class="tutorial-overlay hidden">
    <div class="tutorial-card">
      <div class="tutorial-title">How to Play</div>
      <ol class="tutorial-steps">
        <li>Roll the dice.</li>
        <li>Watch your pawn move.</li>
        <li>Read the tile effect.</li>
      </ol>
      <button id="closeTutorial" class="btn-small">Got it</button>
    </div>
  </div>

  <!-- Connection Popup -->
  <div id="connectionOverlay" class="connection-overlay hidden">
    <div class="connection-card">
      <div class="connection-title">ðŸŽ® Connect LastDrop Controller</div>
      <div class="connection-content">
        <div class="connection-status">
          <div class="status-indicator" id="connectionIndicator">
            <div class="status-dot"></div>
            <span id="connectionText">Waiting for controller...</span>
          </div>
        </div>
        <div class="connection-instructions">
          <p>1. Open LastDrop app on your phone</p>
          <p>2. Start a game session</p>
          <p>3. Roll dice to connect automatically</p>
        </div>
        <div class="connection-actions">
          <button id="skipConnection" class="btn-small">Skip (Demo Mode)</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Reconnection Overlay -->
  <div id="reconnectionOverlay" class="connection-overlay hidden">
    <div class="connection-card">
      <div class="connection-title">ðŸ”„ Reconnecting...</div>
      <div class="connection-content">
        <div class="connection-status">
          <div class="status-indicator">
            <div class="spinner"></div>
            <span id="reconnectionText">Attempting to reconnect...</span>
          </div>
        </div>
        <div class="reconnection-info" id="reconnectionInfo">
          <p>Retry attempt: <strong id="retryAttempt">1</strong>/5</p>
          <p>Next retry in: <strong id="retryDelay">2</strong>s</p>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Welcome Screen (Demo Mode) -->
  <div id="welcomeOverlay" class="connection-overlay">
    <div class="connection-card" style="max-width: 600px; max-height: 90vh; overflow-y: auto;">
      <div class="connection-title">ðŸ’§ Welcome to Last Drop Demo!</div>
      <div class="connection-content" style="text-align: left;">
        <div style="background: rgba(15,23,42,0.5); padding: 16px; border-radius: 8px; margin-bottom: 16px;">
          <h3 style="color: var(--accent); margin-top: 0; font-size: 1.1rem;">ðŸŽ¯ Game Objective</h3>
          <p style="margin: 8px 0; font-size: 0.9rem; line-height: 1.6;">
            Be the last player standing with water drops! Collect drops by landing on positive tiles, 
            avoid negative tiles, and survive till the end.
          </p>
        </div>
        
        <div style="background: rgba(15,23,42,0.5); padding: 16px; border-radius: 8px; margin-bottom: 16px;">
          <h3 style="color: var(--accent); margin-top: 0; font-size: 1.1rem;">ðŸŽ² How to Play</h3>
          <ul style="margin: 8px 0; padding-left: 20px; font-size: 0.85rem; line-height: 1.8;">
            <li><strong>Roll the dice</strong> - Move forward based on dice value</li>
            <li><strong>Tile effects</strong> - Gain or lose water drops depending on where you land</li>
            <li><strong>Chance cards</strong> - Land on special tiles to draw random events</li>
            <li><strong>Complete laps</strong> - Pass START to earn +5 bonus drops</li>
            <li><strong>Elimination</strong> - Players with 0 drops are out of the game</li>
          </ul>
        </div>
        
        <div style="background: rgba(15,23,42,0.5); padding: 16px; border-radius: 8px; margin-bottom: 20px;">
          <h3 style="color: var(--accent); margin-top: 0; font-size: 1.1rem;">âš¡ Demo Features</h3>
          <p style="margin: 8px 0; font-size: 0.85rem; line-height: 1.6;">
            Watch 4 AI players compete automatically. See dice rolls, token movement, 
            chance cards, and real-time scoring in action!
          </p>
        </div>
        
        <div style="text-align: center;">
          <button id="startDemoBtn" class="btn-small" style="font-size: 1rem; padding: 12px 32px; background: linear-gradient(135deg, var(--accent), #60a5fa); border: none; cursor: pointer;">
            ðŸŽ® Start Demo Game
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Header -->
  <header class="header">
    <h1>LAST DROP â€“ DEMO MODE</h1>
    <div class="subtitle">
      Play the demo version in your browser â€“ <a href="live.html" style="color: var(--accent); text-decoration: underline;">Switch to Live Mode</a>
      <span id="sessionInfo" class="last-updated" style="color: #60a5fa;"></span>
      <span id="lastUpdated" class="last-updated"></span>
    </div>
  </header>

  <!-- Main Content Area -->
  <main class="main-content">
    <!-- Board Section -->
    <section class="board-card">
      <div class="board-header">
        <div class="live-label">
          <span class="live-dot"></span>
          Live
        </div>
        <span class="board-status">
          Connection: <span id="connStatus" class="badge-red">OFFLINE</span>
        </span>
      </div>

      <div class="perspective-wrapper">
        <div id="boardWrapper" class="board-wrapper">
          <div id="board3d" class="board3d">
            <div class="board-surface"></div>
            <div class="tiles-grid" id="tilesGrid"></div>
            <div class="tokens-layer" id="tokensLayer"></div>
            
            <div id="chanceCard" class="chance-card">
              <div id="chanceImage" class="chance-image"></div>
              <div class="chance-body">
                <div id="chanceTitle" class="chance-title">Chance Card</div>
                <div id="chanceText" class="chance-text">Awaiting eventâ€¦</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Scoreboard Sidebar -->
    <aside class="side-card">
      <div class="section-title">
        Players
        <span class="pill">Synced from ESP32</span>
      </div>
      <div id="playersList" class="players-list"></div>

      <div class="section-title">
        Last Event
        <span class="pill">Dice / Tile / Card</span>
      </div>

      <!-- Dice Display for Scoreboard -->
      <div id="scoreboardDiceDisplay" class="scoreboard-dice-display">
        <div id="dicePlayerName" class="dice-player-name">Player 1 rolling dice...</div>
        <div class="dice-3d-container">
          <div id="scoreboardDice1" class="dice-3d">
            <div class="dice-face dice-front" data-value="1">
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
            </div>
            <div class="dice-face dice-back" data-value="6">
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
            </div>
            <div class="dice-face dice-right" data-value="3">
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
            </div>
            <div class="dice-face dice-left" data-value="4">
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
            </div>
            <div class="dice-face dice-top" data-value="5">
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
            </div>
            <div class="dice-face dice-bottom" data-value="2">
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
            </div>
          </div>
          <div id="scoreboardDice2" class="dice-3d">
            <div class="dice-face dice-front" data-value="1">
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
            </div>
            <div class="dice-face dice-back" data-value="6">
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
            </div>
            <div class="dice-face dice-right" data-value="3">
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
            </div>
            <div class="dice-face dice-left" data-value="4">
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
            </div>
            <div class="dice-face dice-top" data-value="5">
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
            </div>
            <div class="dice-face dice-bottom" data-value="2">
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
              <span class="dice-dot"></span>
            </div>
          </div>
        </div>
      </div>

      <div id="eventLog" class="event-log">Waiting for first dropâ€¦</div>

      <div class="section-title" style="margin-top: 12px;">
        Eliminated
        <span class="pill" id="eliminatedCount">0</span>
      </div>
      <div id="eliminatedList" class="eliminated-list"></div>

      <div class="status-row">
        <span>Connection: <span id="connStatus" class="badge-red">OFFLINE</span></span>
        <span>Mode: <span id="modeStatus" class="badge-green">DEMO</span></span>
      </div>

      <div class="footer-note">
        ESP32 â†’ Android â†’ Server â†’ Live â€” visual only, rules stay on hardware.
      </div>
    </aside>
  </main>

  <!-- Winner Celebration Overlay -->
  <div id="winnerOverlay" class="winner-overlay hidden">
    <div class="winner-card">
      <div class="winner-trophy">ðŸ†</div>
      <div class="winner-title">WINNER!</div>
      <div id="winnerName" class="winner-name">Player 1</div>
      <div id="winnerDrops" class="winner-drops">ðŸ’§ 15 drops</div>
      <div class="winner-confetti">
        <div class="confetti"></div>
        <div class="confetti"></div>
        <div class="confetti"></div>
        <div class="confetti"></div>
        <div class="confetti"></div>
        <div class="confetti"></div>
        <div class="confetti"></div>
        <div class="confetti"></div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <button id="settingsBtn" class="btn-small" type="button">âš™ï¸ Settings</button>
  </footer>

  <!-- Settings Backdrop -->
  <div id="settingsBackdrop" class="settings-backdrop hidden"></div>

  <!-- Settings Panel (Sidebar) -->
  <div id="settingsPanel" class="settings-panel hidden">
    <div class="settings-content">
      <div class="settings-title">
        <span>âš™ï¸ Settings</span>
        <button id="closeSettings" class="btn-small" type="button">âœ• Close</button>
      </div>
      
      <div class="settings-section">
        <div class="row">
          <label>View</label>
          <button id="viewToggle" class="btn-small" type="button">Toggle</button>
          <span id="viewStatus">Top</span>
        </div>
        <div class="row">
          <label for="zoomRange">Zoom</label>
          <input id="zoomRange" type="range" min="70" max="130" value="100" />
        </div>
        <div class="row">
          <label for="rotateXRange">Tilt X</label>
          <input id="rotateXRange" type="range" min="0" max="90" value="55" />
        </div>
        <div class="row">
          <label for="rotateYRange">Tilt Y</label>
          <input id="rotateYRange" type="range" min="-45" max="45" value="0" />
        </div>
        <div class="row">
          <label for="rotateRange">Rotate</label>
          <input id="rotateRange" type="range" min="-30" max="30" value="45" />
        </div>
      </div>

      <div class="settings-section">
        <div class="row">
          <label>Kid Mode</label>
          <button id="kidToggle" class="btn-small" type="button">Toggle</button>
          <span id="kidStatus">OFF</span>
        </div>
        <div class="row">
          <label>Dev Mode</label>
          <button id="devToggle" class="btn-small" type="button">Toggle</button>
          <span id="devStatus">ON</span>
        </div>
      </div>

      <div class="settings-section" id="devControls" class="dev-controls">
        <div class="row">
          <label for="offsetXRange">Coin X</label>
          <input id="offsetXRange" type="number" min="-50" max="50" value="-12" style="width:60px" />
          <span id="offsetXValue">-12</span>
        </div>
        <div class="row">
          <label for="offsetYRange">Coin Y</label>
          <input id="offsetYRange" type="number" min="-50" max="50" value="0" style="width:60px" />
          <span id="offsetYValue">0</span>
        </div>
        <div class="row">
          <button id="applyCoinOffset" class="btn-small" type="button">Apply Offset</button>
        </div>
      </div>

      <div class="settings-section">
        <div class="row">
          <label>Demo Mode</label>
          <button id="demoToggle" class="btn-small" type="button">Toggle</button>
          <span id="demoStatus">OFF</span>
        </div>
        <div class="row">
          <button id="helpBtn" class="btn-small" type="button">Show Tutorial</button>
        </div>
      </div>

      <div class="settings-section">
        <div class="settings-subsection-title">ðŸ”Š Audio Controls</div>
        <div class="row">
          <label>Master Audio</label>
          <button id="audioToggle" class="btn-small" type="button">Toggle</button>
          <span id="audioStatus">ON</span>
        </div>
        <div class="row">
          <label for="bgMusicVolume">Background Music</label>
          <input id="bgMusicVolume" type="range" min="0" max="100" value="30" />
          <span id="bgMusicValue">30%</span>
        </div>
        <div class="row">
          <label for="diceVolume">Dice Roll</label>
          <input id="diceVolume" type="range" min="0" max="100" value="50" />
          <span id="diceValue">50%</span>
        </div>
        <div class="row">
          <label for="moveVolume">Coin Movement</label>
          <input id="moveVolume" type="range" min="0" max="100" value="40" />
          <span id="moveValue">40%</span>
        </div>
        <div class="row">
          <label for="chanceVolume">Chance Card</label>
          <input id="chanceVolume" type="range" min="0" max="100" value="50" />
          <span id="chanceValue">50%</span>
        </div>
        <div class="row">
          <label for="tileVolume">Tile Landing</label>
          <input id="tileVolume" type="range" min="0" max="100" value="40" />
          <span id="tileValue">40%</span>
        </div>
        <div class="row">
          <label for="eliminatedVolume">Elimination</label>
          <input id="eliminatedVolume" type="range" min="0" max="100" value="60" />
          <span id="eliminatedValue">60%</span>
        </div>
        <div class="row">
          <label for="winnerVolume">Winner</label>
          <input id="winnerVolume" type="range" min="0" max="100" value="70" />
          <span id="winnerValue">70%</span>
        </div>
      </div>
    </div>
  </div>


  <script src="assets/js/demo-main.js"></script>


